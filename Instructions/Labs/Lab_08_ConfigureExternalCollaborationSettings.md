---
lab:
    title: '08 - 外部コラボレーションの設定を構成する'
    learning path: '01'
    module: 'モジュール 03 - 外部 ID の実装と管理を行う'
---

# ラボ 08: 外部コラボレーションの設定を構成する

## ラボ シナリオ

承認されたゲストがアクセスするには、組織の外部コラボレーション設定を有効にする必要があります。

#### 推定時間: 5 分

## 演習 1 - ゲスト ユーザーを組織に招待できるようにする

### タスク 1 - 外部コラボレーションの設定を構成する

1. [https://portal.azure.com](https://portal.azure.com) にテナント管理者としてサインインします。
2. **「Azure Active Directory」** を選択します。
3. **「External Identities > 外部コラボレーションの設定」** を選択します。
4. 画面の上部に表示される **「ゲストのメール ワンタイムパスコードが、すべてのIDプロバイダーに移動されました」** 通知リンクをクリックします。

    **注** - ワンタイム パスコードは、ユーザーを組織に招待するための非常に安全な方法です。

5. 「**メールのワンタイムパスコード**」をクリックします。

6. **ID プロバイダーの構成** で、「**ゲストのメール ワンタイム パスコードが有効になりました**」を選択して、**保存** をクリックします。

7. 画面上部で、`Home > Contoso Marketing >` **「External ID」** をクリックして、前の画面に戻ります。 


6. **「ゲスト ユーザー アクセス」** で、使用可能なアクセス レベルを確認し、**「ゲスト ユーザーのアクセスは、自分のディレクトリ オブジェクトのプロパティとメンバーシップに制限されます (最も制限が多い)」** を選択します。

    **メモ**

    - ゲスト ユーザーにメンバーと同じアクセス権を付与する (制限が最も少ない): このオプションを選択すると、ゲストがメンバー ユーザーと同じように Azure AD リソースとディレクトリ データにアクセスできるようになります。
    - ゲスト ユーザーに対してディレクトリ オブジェクトのプロパティとメンバーシップへのアクセスを制限する(規定値): この設定を選択すると、ゲストは、特定のディレクトリ タスク (ユーザー、グループ、またはその他のディレクトリ リソースを列挙するなど) を実行できなくなります。
    - ゲスト ユーザーのアクセスは、各自のディレクトリ オブジェクトのプロパティとメンバーシップに制限されます (最も制限が多い): この設定では、ゲストは自分のプロファイルのみにアクセスできます。ゲストは、他のユーザーのプロファイル、グループ、またはグループ メンバーシップを参照することはできません。

    ![ゲスト ユーザーのアクセス制限オプションを表示している画面イメージ](./media/lp1-mod3-guest-user-access-restrictions.png)

7. **「ゲスト招待の設定」** で、**メンバー アクセス許可を持つゲストを含むメンバー ユーザーと特定の管理者ロールに割り当てられたユーザーがゲスト ユーザーを招待できる**を選択します。

    **メモ**
    
    - ゲストと非管理者を含む組織内のすべてのユーザーがゲスト ユーザーを招待できる (最も包括的) : 組織内のゲストが、組織のメンバーでないひとも含めて他のゲストを招待できるようにするには、このオプション ボタンを選択します。
    - メンバー アクセス許可を持つゲストを含むメンバー ユーザーと特定の管理者ロールに割り当てられたユーザーがゲスト ユーザーを招待できる: メンバー ユーザーと特定の管理者の役割を持つユーザーがゲストを招待できるようにするには、このオプション ボタンを選択します。
    - ゲストは招待ができるゲストが他のゲストを招待できるようにするには、このポリシーを「はい」に設定します。
    - 特定の管理者ロールに割り当てられているユーザーのみがゲスト ユーザーを招待できる: 管理者の役割を持つユーザーだけがゲストを招待できるようにするには、このオプション ボタンを選択します。 管理者の役割には、全体管理者、ユーザー管理者、およびゲスト招待元が含まれます。
    - 管理者を含む組織内のすべてのユーザーがゲスト ユーザーを招待できない (最も制限的) : 組織内のだれもがゲストを招待できないようにするには、このオプション ボタンを選択します。

    ![「ゲストは招待ができる」が「いいえ」に設定されて強調表示されているゲスト招待の設定を表示している画面イメージ](./media/lp1-mod3-guest-user-invite-settings.png)

8. **「コラボレーションの制限」** で、使用可能なオプションを確認し、既定の設定をそのまま使用します。

    **重要**
    
    - 許可リストまたは拒否リストのいずれかを作成できます。両方の種類のリストを設定することはできません。既定では、許可リストに含まれないドメインはすべて拒否リストに含まれます。また、その逆も言えます。
    - 各組織に作成できるポリシーは 1 つだけです。ポリシーを更新してより多くのドメインを含めることも、ポリシーを削除して新規に作成することもできます。
    - 許可リストまたは拒否リストに追加できるドメインの数は、ポリシーのサイズによってのみ制限されます。ポリシー全体の最大サイズは 25 KB (25,000 文字) です。これには、許可リストまたは拒否リストと、他の機能向けに構成された他のパラメーターが含まれます。
    - このリストは、OneDrive for Business や SharePoint Online の許可/ブロック リストとは無関係に機能します。SharePoint Online で個々のファイルの共有を制限する場合は、OneDrive for Business および SharePoint Online の許可リストまたは拒否リストを設定する必要があります。
    - このリストは、招待を既に使用した外部ユーザーには適用されません。リストは、リストの設定後に適用されます。ユーザーの招待が保留中の状態にあり、ドメインをブロックするポリシーを設定した場合、ユーザーが招待の使用を試みると失敗します。

9. 完了したら、変更を保存します。
